\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{maquereaux}

% ===============================
% Dependancies
% ===============================

\RequirePackage[french]{babel}

\RequirePackage{amsmath}
\RequirePackage{mathtools}

% preamble : paired delimiters
\DeclarePairedDelimiterX{\pairedbrackets}[1]{(}{)}{#1}
\DeclarePairedDelimiterX{\pairedcurly}[1]{\{}{\}}{#1}
\DeclarePairedDelimiterX{\pairedrectangular}[1]{[}{]}{#1}

% Symboles mathématiques

% logique et typographie générale :
% commande en minuscule -> constante ou fonction
% commande en majuscule -> ensemble
% mettre, si possible, une commande en anglais plutôt qu’en français
% pour être raccord avec les commandes LaTeX usuelles qui sont écrites en anglais

% TODO: clean all comments after commands just to be uniform in the positioning

% ────────────────────────────────────────────────────────────────────────────────
% (MISE EN FORME)
% ────────────────────────────────────────────────────────────────────────────────

\newcommand\mathbi[1]{\textbf{\em #1}} % math bold + italic
\newcommand\mathset[1]{\mathbb{#1}} % notation des ensembles de nombres : mathbb ou mathbf en général, mais d'autres variations possibles
% \newcommand\mathset[1]{\mathbf{#1}}

% ────────────────────────────────────────────────────────────────────────────────
% (GÉNÉRIQUE)
% ────────────────────────────────────────────────────────────────────────────────

% constantes et symboles
\DeclareMathOperator{\e}{e} % nombre e
\renewcommand\i{\mathrm{i}} % i
\renewcommand\j{\mathrm{j}} % j

% TODO: renommer en \cpi pour «constante pi»
\newcommand\PI{\mathrm{π}} % constante pi
\newcommand\TAU{\mathrm{τ}} % constante tau = 2 pi
\newcommand\gold{\mathrm{φ}} % nombre d’or

% opérateurs génériques
\newcommand\kro[2]{\delta_{#1,#2}} % symbole de Kronecker
\newcommand\ind{\mathbb{1}} % fonction indicatrice
\newcommand\inv[1]{#1^{-1}} % inverse

% ────────────────────────────────────────────────────────────────────────────────
% (THÉORIE DES ENSEMBLES)
% ────────────────────────────────────────────────────────────────────────────────

% écriture d’ensembles

\newcommand\sa{\,|\,} % such as = tel que

% TODO: traduire ces commandes en anglais proprement
\newcommand\Set[1]{\left\{#1\right\}} % ensemble
\newcommand\SetP[2]{\Set{#1\sa#2}} % ensemble décrit par une propriété
\newcommand\SetA[2]{\Set{#1~;~#2}} % ensemble décrit analytiquement

% opérations ensemblistes
% \newcommand\card[1]{\mathrm{Card}\pairedcurly{#1}} % cardinal notation “card”
% \newcommand\card[1]{\left\{#1\right\}}
\newcommand\card[1]{\# #1} % cardinal (notation #)
% \newcommand\card[1]{|#1|}
\newcommand\parts[1]{\mathcal{P}\pairedbrackets{#1}}      % parties de E

\newcommand\comp[1]{{}^{c}#1}                    % complémentaire d'un ensemble
\newcommand\union{\cup} % union
\newcommand\bigunion{\bigcup} % (grosse) union
\newcommand\inter{\cap} % intersection
\newcommand\biginter{\bigcap} % (grosse) intersection
\DeclareMathOperator{\nor}{\triangle} % différence symétrique

\newcommand\tribeng[1]{\sigma(#1)} % tribu engendrée par une classe
\newcommand\borel{\mathcal{B}} % tribu borélienne

% fonctions
\newcommand\longto{\longrightarrow} % longue flèche

\newcommand{\app}[4]{ % fonction (sans la nommer)
  \begin{array}{rcl}
    #1 & \longto & #2 \\
    #3 & \longmapsto     & #4
  \end{array}
}
\newcommand{\function}[5]{ % fonction
  \begin{array}{rcl}
    #1 : #2 & \longto & #3 \\
    #4 & \longmapsto     & #5
  \end{array}
}

\newcommand\inj{\hookrightarrow} % injection
\newcommand\surj{\twoheadrightarrow} % surjection

% ensembles de nombres

\newcommand\N{\mathset{N}} % naturels
\newcommand\Z{\mathset{Z}} % relatifs
\newcommand\Q{\mathset{Q}} % rationnels
\newcommand\R{\mathset{R}} % reels
\newcommand\C{\mathset{C}} % complexes
\renewcommand\H{\mathset{H}} % quaternions

\newcommand\K{\mathset{K}} % corps usuel, R ou C.
\newcommand\F{\mathset{F}} % corps à p éléments
\newcommand\U{\mathset{U}} % racines de l’unité

% fonctions usuelles (autres opérateurs)
\DeclareMathOperator\ch{ch} % cosinus hyperbolique
\DeclareMathOperator\sh{sh} % sinus hyperbolique
% ────────────────────────────────────────────────────────────────────────────────
% (ALGÈBRE)
% ────────────────────────────────────────────────────────────────────────────────

% Algèbre générale

\DeclareMathOperator{\iso}{\cong} % relation d’isomorphismes

\DeclareMathOperator{\subgroup}{<} % sous-groupe
\DeclareMathOperator{\normal}{\vartriangleleft} % sous-groupe normal (ou distingué)
\DeclareMathOperator{\normalright}{\vartriangleright} % sous-groupe normal (vers la droite)
\newcommand\centre[1]{Z(#1)} % centre d’un groupe
\newcommand\eng[1]{\left\langle#1\right\rangle} % sous-groupe engendré par une partie
\DeclareMathOperator{\semiprod}{\rtimes} % produit semi-direct de groupes
\newcommand\indice[2]{[#2:#1]} % indice d’un sous-groupe dans un groupe

\newcommand\action{\looparrowright} % action de groupe
\newcommand\orbite[1]{\mathcal{O}_#1} % orbite d’un élément
\newcommand\stab[1]{\mathrm{Stab}(#1)} % stabilisateur d’un élément
\newcommand\fix[1]{\mathrm{Fix}(#1)} % fixateur d’un élément

\newcommand\groupdual[1]{\hat{#1}} % dual d’un groupe

\newcommand\inversibles[1]{#1^\times} % ensemble des inversibles d’un anneau

\newcommand\ideng[1]{(#1)} % idéal engendré

% ensembles de morphismes
\newcommand\Hom{\mathrm{Hom}}                             % l'ensemble des (homo)morphismes de groupes
\newcommand\Iso{\mathrm{Iso}}                             % l'ensemble des isomorphismes de groupes
\newcommand\End{\mathrm{End}}                             % l'ensemble des endomorphisme de groupe
\newcommand\Aut{\mathrm{Aut}}                             % l'ensemble des automorphismes de groupe

\DeclareMathOperator{\Id}{Id} % application identité

\newcommand\ensS[1]{\mathfrak{#1}} % notation des ensembles de permutations : classiques ou mathfrak
\newcommand\Sym{\ensS{S}} % groupe symétrique (permutations)
\newcommand\Alt{\ensS{A}} % groupe alterné
\newcommand\sign{\varepsilon} % signature d’une permutation

\newcommand\Diedral{\mathset{D}} % groupe diédral

% ────────────────────────────────────────────────────────────────────────────────
% (ALGÈBRE LINÉAIRE)

\DeclareMathOperator{\Vect}{Vect} % ensemble engendré par une famille de vecteurs

\newcommand\Lin{\mathcal{L}} % ensemble d’applications linéaires
\newcommand\FLin[1]{\Lin{#1}{\R}} % ensemble des formes linéaires
\newcommand\dual[1]{#1^*} % espace dual
% TODO: renommer cette commande en vecdual ou spacedual

\newcommand\Bil[2]{\mathcal{L}_2(#1, #2)} % ensemble des formes bilinéaires
\newcommand\Quad{\mathcal{Q}} % ensemble des formes quadratiques

\newcommand\GL{\mathrm{GL}} % groupe linéaire (matrices inversibles)
\newcommand\SL{\mathrm{SL}} % groupe spécial linéaire (matrices de déterminant 1)
\newcommand\Orth{\mathcal{O}} % groupe orthogonal (matrices dont l'inverse est la transposée)
\newcommand\SO{\mathrm{SO}} % groupe spécial orthogonal (matrices orthogonales de déterminant 1)
\newcommand\PGL{\mathrm{PGL}} % groupe linéaire projectif
\newcommand\PSL{\mathrm{PSL}} % groupe spécial projectif

\newcommand\matrixset[1]{\mathcal{#1}} % calligraphie d’un ensemble de matrices
\newcommand\M{\matrixset{M}} % l'ensemble des matrices
\renewcommand\S{\matrixset{S}} % ensemble des matrices symétriques
\newcommand\Diag{\mathrm{D}} % ensemble des matrices diagonales

\newcommand\vect[1]{\mathbf{#1}} % écriture d'un vecteur
\DeclareMathOperator{\Mat}{Mat} % matrice d’une application linéaire

\newcommand\Base{\mathfrak{B}} % base

\newcommand\T[1]{#1^\top} % Transposée (version T après)
\newcommand\adj[1]{#1^*} % matrice adjointe (ou transconjuguée, ou adjoint hermitienne)

\DeclareMathOperator{\tr}{Tr}                  % Trace
\renewcommand\ker{\mathrm{Ker}}                         % Noyau
\DeclareMathOperator{\im}{Im}                  % Image
\DeclareMathOperator{\rg}{rg}                  % Rang

\newcommand\orth[1]{#1^\perp} % orthogonal d’une partie
\newcommand\oorth[1]{#1^\circ} % orthogonal d’une partie du dual

\DeclareMathOperator{\codim}{codim}            % Codimension
\DeclareMathOperator{\com}{com} % Comatrice

% TODO: passer cette commande en minuscule, car moralement c’est une fonction
% (qui moralament donne un ensemble cela dit)
\DeclareMathOperator\spectrum{Sp} % Spectre
\newcommand\spradius{\rho} % rayon spectral

% ────────────────────────────────────────────────────────────────────────────────
% (ANALYSE)
% ────────────────────────────────────────────────────────────────────────────────

\newcommand\abs[1]{\left| #1\right|} % Valeur absolue
% \DeclarePairedDelimiter\abs{\lvert}{\rvert} % valeur absolue
\newcommand\norme[1]{\left\Vert #1\right\Vert} % Norme
\newcommand\triple[1]{\left|\left|\left|#1\right|\right|\right|} % norme triple
\newcommand\ps[2]{\left\langle #1 ~|~ #2\right\rangle}  % Produit scalaire

% ────────────────────────────────────────────────────────────────────────────────
% (TOPOLOGIE)

\newcommand\interior[1]{\mathring{#1}}                       % intérieur (\int est déjà pris pour l’intégrale)
\newcommand\adh[1]{\overline{#1}}                            % adhérence
\newcommand\front[1]{\partial #1}                   % frontière

% ────────────────────────────────────────────────────────────────────────────────
% (CALCUL DIFFÉRENTIEL)

\renewcommand\d{\,\mathrm{d}} % opérateur différentielle élémentaire
\newcommand\diff[2]{\d #1_{#2}} % Différentielle (notation df_a)
% \newcommand\diff[2]{\d #1(#2)} % Différentielle (notation df(a))
% \newcommand\diff[2]{#1'(#2)} % Différentielle (notation f'(a))

\newcommand\deriv[2]{\frac{\d #1}{\d #2}}               % Derivee
% \newcommand\dpar[2]{\frac{\partial #1}{\partial #2}}    % Derivee partielle
\newcommand\dpar[2]{\partial_{#2} #1}    % Derivee partielle
\newcommand\dnpar[3]{\frac{\partial^{#1} #2}{\partial #3^{#1}}}   % nième derivee partielle

\newcommand\grad{\nabla}            % gradient (version avec nabla)
% \newcommand\grad{\overrightarrow{\mathrm{grad}}} % gradient (version avec grad fléché)
% \renewcommand\div{\mathrm{div}} % divergence
\newcommand\rot{\overrightarrow{\mathrm{rot}}} % rotationnel
\newcommand\lap{\Delta} % laplacien

\DeclareMathOperator{\jac}{Jac} % matrice jacobienne
\newcommand\detjac[2]{\mathrm{J}_{#1}\left(#2\right)} % déterminant jacobien
\newcommand\hess[1]{\mathcal{H}#1} % hessienne

\newcommand\Class{\mathcal{C}} % Ensemble de fonctions continues ou de classe C…
\newcommand\Lip{\mathcal{L}} % Ensemble des fonctions lipschitziennes

% ──────────────────────────────────────────────────────────────────────────────
% ANALYSE COMPLEXE

\newcommand\conj[1]{\overline{#1}} % conjugué
% \newcommand\mod[1]{\abs{#1}} % module
% NOTE: pas sûr à 100% que ce soit nécessaire d’ajouter celui-là

\DeclareMathOperator{\Arg}{Arg} % argument principal
\DeclareMathOperator{\Log}{Log} % logarithme principal

\newcommand\Circunit{\mathset{U}} % cercle unité
\newcommand\Diskunit{\mathset{D}} % disque unité

\newcommand\Anal{\mathcal{A}} % Ensemble des fonctions analytiques
\newcommand\Holo{\mathcal{H}} % Ensemble des fonctions holomorphes
\newcommand\Mero{\mathcal{M}} % Ensemble des fonctions méromorphes

% ──────────────────────────────────────────────────────────────────────────────
% ANALYSE FONCTIONNELLE

\renewcommand\L{\mathrm{L}} % espace L^p
\renewcommand\l{\ell} % espace l^p
\newcommand\Sobolev{W} % espace de Sobolev

% ────────────────────────────────────────────────────────────────────────────────
% (PROBABILITÉS)
% ────────────────────────────────────────────────────────────────────────────────

% opérateurs usuelles
% TODO: mettre en place pour chaque fonction avec des délimiteurs, deux fonction différentes :
% une «inline», avec des délimiteurs de taille fixe pour des caractères pas en displaystyle
% une «auto», avec des délimiteurs de taille variable, utile en displaystyle

% \newcommand\Prob[1]{\mathbb{P}\left(#1\right)}                 % Probabilité
\newcommand\Prob[1]{\mathbb{P}\pairedbrackets*{#1}}                 % Probabilité
% \newcommand\Prob[1]{\mathrm{P}\left(#1\right)}                 % Probabilité (variante, P simple droit)
% \newcommand\Esp[1]{\mathbb{E}\left[#1\right]}                  % Espérance
\newcommand\Esp[1]{\mathbb{E}\pairedrectangular*{#1}} % espérance
% \newcommand\Var[1]{\mathrm{Var}\left(#1\right)}                  % Variance
\newcommand\Var[1]{\mathrm{Var}\pairedbrackets*{#1}}                  % Variance
\newcommand\sd[1]{\sigma\pairedbrackets*{#1}}                  % Écart-type (standard deviation)
% TODO: décider si macro sous la forme \Cov{}{}
\DeclareMathOperator{\Cov}{Cov}                  % Covariance

% lois discrètes
\newcommand\Bernoulli[1]{\mathcal{B}(#1)}                 % Loi de Bernoulli
\newcommand\Binom[2]{\Bernoulli{#1,#2}}                   % Loi binomiale
\newcommand\Poisson[1]{\mathcal{P}(#1)}                   % Loi de Poisson
\newcommand\Geom[1]{\mathcal{G}(#1)}                      % Loi géométrique
\newcommand\Hyper[3]{\mathcal{H}(#1,#2,#3)}               % Loi hypergéométrique

% lois continues
\newcommand\Exp[1]{\mathcal{E}(#1)}                       % Loi exponentielle
\newcommand\Normale[2]{\mathcal{N}\left(#1, #2\right)}    % Loi normale
\newcommand\chid[1]{\chi^{2}_{#1}}                          % Loi du chi-deux

\DeclareMathOperator{\GEV}{\mathrm{GEV}}                  % Loi GEV (Generalized Extreme Values)
\DeclareMathOperator{\GPD}{\mathrm{GP}}                   % Loi GPD (Generalized Pareto Distribution)

% ──────────────────────────────────────────────────────────────────────────────
% ARITHMÉTIQUE
% ──────────────────────────────────────────────────────────────────────────────

\newcommand\divides{\,|\,} % divisibilité
\newcommand\congru[3]{#1 \equiv #2\,[#3]}                  % relation de congruence
\newcommand\pgcd[2]{#1\wedge #2} % pgcd de deux entiers
\newcommand\bigpgcd{\bigwedge} % pgcd de plusieurs entiers
\newcommand\ppcm[2]{#1\vee #2} % ppcm de deux entiers
\newcommand\bigppcm{\bigvee} % ppcm de plusieurs entiers

\newcommand\Zmod[1]{\Z/#1\Z}                             % classes d'équivalence modulo n
\newcommand\Primes{\mathcal{P}}                           % ensemble des nombres premiers

\newcommand\indeuler{\varphi} % fonction indicatrice d’Euler

% TODO: valuation p‑adique ?

\newcommand\legendre[2]{\left(\frac{#1}{#2}\right)} % symbole de Legendre
